// vis p2,1
/**
 * @file nextion_visible.c
 * @author your name (you@domain.com)
 * @brief
 * @version 0.1
 * @date 2023-12-07
 *
 * @copyright Copyright (c) 2023
 *
 */
/***********************************************************************************************************************
 * Pragma directive
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Includes <System Includes>
 ***********************************************************************************************************************/
#include "common.h"
#include "nextion.h"
/***********************************************************************************************************************
 * Macro definitions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Typedef definitions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Private global variables and functions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Exported global variables and functions (to be accessed by other files)
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Imported global variables and functions (from other files)
 ***********************************************************************************************************************/

/**
 * @brief set visibility of the nextion component
 *
 * @param id
 * @param visible
 */
void nextion_setVisible(const char *id, bool visible)
{
    char cmd[20];
    memset(cmd, 0x00, 20);
    uint16_t len = 0;
    len = snprintf(cmd, 20, "vis %s,%d", id, visible);
    nextion_send_message(cmd, len);
}

/**
 * @brief
 *
 * @param id
 * @param color
 */
void nextion_setColorText(const char *id, uint32_t color)
{
    // ComTotalBat.pco=55555
    char cmd[30];
    memset(cmd, 0x00, 30);
    uint16_t len = 0;
    len = snprintf(cmd, 30, "%s.pco=%ld", id, color);
    nextion_send_message(cmd, len);
}

/**
 * @brief
 *
 * @param id
 * @param color
 */
void nextion_setColorButton(const char *id, uint32_t color)
{
    // ComTotalBat.pco=55555
    char cmd[20];
    memset(cmd, 0x00, 20);
    uint16_t len = 0;
    len = snprintf(cmd, 20, "%s.pco=%d", id, color);
    nextion_send_message(cmd, len);

    memset(cmd, 0x00, 20);
    len = 0;
    len = snprintf(cmd, 20, "%s.pco2=%d", id, color);
    nextion_send_message(cmd, len);
}

/**
 * @brief 
 * 
 * @param baud 
 */
void nextion_setBaud(uint32_t baud)
{
    // "baud=115200"
    char cmd[20];
    memset(cmd, 0x00, 20);
    uint16_t len = 0;
    len = snprintf(cmd, 20, "baud=%ld",baud);
    nextion_send_message(cmd, len);
}
/***********************************************************************************************************************
 * static functions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * End of file
 ***********************************************************************************************************************/